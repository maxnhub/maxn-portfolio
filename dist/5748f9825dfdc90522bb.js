(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{102:function(t,a,i){"use strict";var s=i(73);i.n(s).a},108:function(t,a,i){"use strict";i.r(a);var s=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("div",{staticClass:"works"},[i("div",{staticClass:"change-block change-block--works"},[i("div",{staticClass:"change-block-title"},[t._v("Добавление работы")]),i("form",{staticClass:"works__field"},[i("div",{staticClass:"works__drag"},[t.filePreview?i("img",{attrs:{src:t.filePreview}}):t._e(),i("input",{ref:"fileUpload",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.handleFile}}),i("div",{staticClass:"works__drag-desc"},[t._v("Загрузите изображение")]),i("button",{staticClass:"load",attrs:{type:"button"},on:{click:function(a){return t.$refs.fileUpload.click()}}},[t._v("Загрузить")])]),i("div",{staticClass:"works__add"},[i("form",{staticClass:"works__form",on:{submit:function(a){return a.preventDefault(),t.submitForm(a)}}},[i("label",{staticClass:"input__subtext",attrs:{for:"works-name-id"}},[t._v("Название"),t.isError?i("span",{staticClass:"error"},[t._v(t._s(this.validation.firstError("formData.name")))]):t._e()]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"input__form",attrs:{id:"works-name-id",type:"text",name:"name"},domProps:{value:t.formData.name},on:{input:function(a){a.target.composing||t.$set(t.formData,"name",a.target.value)}}}),i("label",{staticClass:"input__subtext",attrs:{for:"works-link-id"}},[t._v("Ссылка"),t.isError?i("span",{staticClass:"error"},[t._v(t._s(this.validation.firstError("formData.link")))]):t._e()]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.link,expression:"formData.link"}],staticClass:"input__form",attrs:{id:"works-link-id",type:"text",name:"link"},domProps:{value:t.formData.link},on:{input:function(a){a.target.composing||t.$set(t.formData,"link",a.target.value)}}}),i("label",{staticClass:"input__subtext",attrs:{for:"works-textarea-id"}},[t._v("Описание"),t.isError?i("span",{staticClass:"error"},[t._v(t._s(this.validation.firstError("formData.description")))]):t._e()]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.description,expression:"formData.description"}],staticClass:"input__textarea works-textarea",attrs:{id:"textarea-connect-id",name:"textarea"},domProps:{value:t.formData.description},on:{input:function(a){a.target.composing||t.$set(t.formData,"description",a.target.value)}}}),i("label",{staticClass:"input__subtext",attrs:{for:"works-tag-id"}},[t._v("Добавление тэга"),t.isError?i("span",{staticClass:"error"},[t._v(t._s(this.validation.firstError("formData.tags")))]):t._e()]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.tags,expression:"formData.tags"}],staticClass:"input__form",attrs:{id:"works-tag-id",type:"text",name:"tag"},domProps:{value:t.formData.tags},on:{input:function(a){a.target.composing||t.$set(t.formData,"tags",a.target.value)}}}),t._m(0)])])])])]),i("div",{staticClass:"new-works"},[i("button",{staticClass:"load-big"},[i("div",{staticClass:"load-big__icon-box"},[i("svg-icon",{attrs:{className:"load__icon",iconName:"remove"}})],1),i("div",{staticClass:"load__text"},[t._v("Добавить работу")])]),i("div",{staticClass:"change-block change-block--work"},[t._m(1),i("div",{staticClass:"work__desc"},[i("div",{staticClass:"work__name"},[t._v("Новая работа")]),i("div",{staticClass:"work__name-desc"},[t._v("Описание этой работы")]),i("div",{staticClass:"work__link"},[t._v("http://google.com")]),i("div",{staticClass:"fix-del__buttons"},[i("button",{staticClass:"fix-del__button fix-del__button--fix",attrs:{type:"button"}},[i("div",{staticClass:"fix-del__button-text"},[t._v("Править")]),i("div",{staticClass:"fix-del__icon fix-del__icon--fix"},[i("svg-icon",{attrs:{className:"admin__icon",iconName:"pencil"}})],1)]),i("button",{staticClass:"fix-del__button fix-del__button--delete",attrs:{type:"button"}},[i("div",{staticClass:"fix-del__button-text"},[t._v("Удалить")]),i("div",{staticClass:"fix-del__icon fix-del__icon--delete"},[i("svg-icon",{attrs:{className:"admin__icon",iconName:"remove"}})],1)])])])])])])};s._withStripped=!0;i(15);var e=i(10),r=i(72),o=i.n(r),n="https://webdev-api.loftschool.com/";o.a.defaults.baseURL=n,o.a.defaults.headers.Authorization="Bearer ".concat("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjE4MiwiaXNzIjoiaHR0cDovL3dlYmRldi1hcGkubG9mdHNjaG9vbC5jb20vbG9naW4iLCJpYXQiOjE1NzIyNjI2NTYsImV4cCI6MTU3MjI4MDY1NiwibmJmIjoxNTcyMjYyNjU2LCJqdGkiOiJMa1FBNWVyTW9mdVFTT2I3In0.102dADWsH-fF4MXLFsZ6ufomwkyKgTxBUrsTBXrz8ys");var l={data:function(){return{formData:{name:"",link:"",description:"",tags:"",photo:""},isError:!1,filePreview:""}},components:{svgIcon:function(){return Promise.resolve().then(i.bind(null,15))}},methods:{handleFile:function(t){var a=this,i=this.fileFromForm(t);this.formData.photo=i,this.renderFile(i).then((function(t){a.filePreview=t}))},fileFromForm:function(t){var a=t.target.files||t.dataTransfer.files;if(!a.length)throw new Error("Нет файла");return a[0]},renderFile:function(t){var a=new FileReader;return new Promise((function(i,s){try{a.readAsDataURL(t),a.onloadend=function(){i(a.result)}}catch(t){throw new Error("Ошибка при чтении файла")}}))},submitForm:function(){var t=this;o.a.post(n+"/works",{title:this.formData.name,techs:this.formData.tags,photo:this.formData.photo,link:this.formData.link,description:this.formData.description}).then((function(t){console.log(t.data)})).catch((function(t){console.log(t.response.data)})),this.$validate().then((function(a){a?console.log("Send form here",a):(console.log("Validation error",a),t.isError=!0)}))}},validators:{"formData.name":function(t){return e.Validator.value(t).required("Введите имя")},"formData.link":function(t){return e.Validator.value(t).required("Введите ссылку")},"formData.description":function(t){return e.Validator.value(t).required("Введите описание")},"formData.tags":function(t){return e.Validator.value(t).required("Введите тэги")},"formData.photo":function(t){return e.Validator.value(t).required("Загрузите изображение")}}},c=(i(102),i(3)),d=Object(c.a)(l,s,[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"block__buttons"},[a("button",{staticClass:"cancel",attrs:{type:"button"}},[this._v("Отмена")]),a("button",{staticClass:"load"},[this._v("Загрузить")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"work__visual"},[a("div",{staticClass:"work__tags"},[a("div",{staticClass:"work__tag"},[this._v("html")]),a("div",{staticClass:"work__tag"},[this._v("css")]),a("div",{staticClass:"work__tag"},[this._v("javascript")])])])}],!1,null,null,null);d.options.__file="src/admin/pages/works.vue";a.default=d.exports},73:function(t,a,i){}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{105:function(e,t,a){"use strict";var i=a(75);a.n(i).a},112:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"feedback"},[a("div",{staticClass:"change-block-title"},[e._v("Добавить отзыв ")]),a("form",{staticClass:"feedback__field",on:{submit:function(t){return t.preventDefault(),e.submitFormFeedback(t)}}},[a("div",{staticClass:"feedback__visual"},[a("div",{staticClass:"feedback__avatar"},[e.filePreview?a("img",{attrs:{src:e.filePreview}}):e._e(),a("input",{ref:"fileUpload",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.handleFile}}),a("div",{staticClass:"feedback__avatar-icon"},[a("svg-icon",{attrs:{className:"admin__icon",iconName:"user"}})],1)]),a("button",{staticClass:"add-avatar",attrs:{type:"button"},on:{click:function(t){return e.$refs.fileUpload.click()}}},[e._v("Добавить фото")])]),a("div",{staticClass:"feedback__desc"},[a("div",{staticClass:"feedback__forms"},[a("div",{staticClass:"feedback__desc-row"},[a("div",{staticClass:"feedback__desc-item"},[a("label",{staticClass:"input__subtext",attrs:{for:"feedback-name-id"}},[e._v("Имя автора"),e.isError?a("span",{staticClass:"error"},[e._v(e._s(this.validation.firstError("formFeedback.author")))]):e._e()]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formFeedback.author,expression:"formFeedback.author"}],staticClass:"input__form",attrs:{id:"feedback-name-id",type:"text",name:"author-name"},domProps:{value:e.formFeedback.author},on:{input:function(t){t.target.composing||e.$set(e.formFeedback,"author",t.target.value)}}})]),a("div",{staticClass:"feedback__desc-item"},[a("label",{staticClass:"input__subtext",attrs:{for:"feedback-position-id"}},[e._v("Титул автора"),e.isError?a("span",{staticClass:"error"},[e._v(e._s(this.validation.firstError("formFeedback.position")))]):e._e()]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formFeedback.position,expression:"formFeedback.position"}],staticClass:"input__form",attrs:{id:"feedback-position-id",type:"text",name:"author-position"},domProps:{value:e.formFeedback.position},on:{input:function(t){t.target.composing||e.$set(e.formFeedback,"position",t.target.value)}}})])]),a("div",{staticClass:"feedback__desc-item feedback__desc-item--textarea"},[a("label",{staticClass:"input__subtext",attrs:{for:"feedback-textarea-id"}},[e._v("Отзыв"),e.isError?a("span",{staticClass:"error"},[e._v(e._s(this.validation.firstError("formFeedback.description")))]):e._e()]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formFeedback.description,expression:"formFeedback.description"}],staticClass:"input__textarea feedback-textarea",attrs:{id:"textarea-feedback-id",name:"feedback-textarea"},domProps:{value:e.formFeedback.description},on:{input:function(t){t.target.composing||e.$set(e.formFeedback,"description",t.target.value)}}})]),e._m(0)])])])]),a("div",{staticClass:"new-feedback"},[a("button",{staticClass:"load-big"},[a("div",{staticClass:"load-big__icon-box"},[a("svg-icon",{attrs:{className:"load__icon",iconName:"remove"}})],1),a("div",{staticClass:"load__text"},[e._v("Добавить работу")])]),a("div",{staticClass:"change-block change-block--feedback"},[e._m(1),a("div",{staticClass:"new-feedback-text"},[e._v("Данный план является примерным ориентиром. Вы всегда можете работать в удобном для себя темпе. Оптимальное время, которое мы рекомендуем выделять на обучение: 32-34 часа в неделю.")]),a("div",{staticClass:"fix-del__buttons fix-del__buttons--feedback"},[a("button",{staticClass:"fix-del__button fix-del__button--fix",attrs:{type:"button"}},[a("div",{staticClass:"fix-del__button-text"},[e._v("Править")]),a("div",{staticClass:"fix-del__icon fix-del__icon--fix"},[a("svg-icon",{attrs:{className:"admin__icon",iconName:"pencil"}})],1)]),a("button",{staticClass:"fix-del__button fix-del__button--delete",attrs:{type:"button"}},[a("div",{staticClass:"fix-del__button-text"},[e._v("Удалить")]),a("div",{staticClass:"fix-del__icon fix-del__icon--delete"},[a("svg-icon",{attrs:{className:"admin__icon",iconName:"remove"}})],1)])])])])])};i._withStripped=!0;a(15);var s=a(72),o={data:function(){return{formFeedback:{photo:"",author:"",position:"",description:""},isError:!1,filePreview:""}},components:{svgIcon:function(){return Promise.resolve().then(a.bind(null,15))}},methods:{handleFile:function(e){var t=this,a=this.fileFromForm(e);this.formFeedback.photo=a,this.renderFile(a).then((function(e){t.filePreview=e}))},fileFromForm:function(e){var t=e.target.files||e.dataTransfer.files;if(!t.length)throw new Error("Нет файла");return t[0]},renderFile:function(e){var t=new FileReader;return new Promise((function(a,i){try{t.readAsDataURL(e),t.onloadend=function(){a(t.result)}}catch(e){throw new Error("Ошибка при чтении файла")}}))},submitFormFeedback:function(){var e=this;s.a.post("/reviews",{photo:this.formFeedback.photo,author:this.formFeedback.author,occ:this.formFeedback.position,text:this.formFeedback.description}).then((function(e){console.log(e.data)})).catch((function(e){console.log(e.response.data)})),this.$validate().then((function(t){t?console.log("Send form here",t):(console.log("Validation error",t),e.isError=!0)}))}},validators:{"formFeedback.photo":function(e){return Validator.value(e).required("Имя Фамилия")},"formFeedback.author":function(e){return Validator.value(e).required("Имя Фамилия")},"formFeedback.position":function(e){return Validator.value(e).required("Введите должность")},"formFeedback.description":function(e){return Validator.value(e).required("Заполните отзыв")}}},r=(a(105),a(3)),n=Object(r.a)(o,i,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"block__buttons"},[t("button",{staticClass:"cancel",attrs:{type:"button"}},[this._v("Отмена")]),t("button",{staticClass:"load"},[this._v("Загрузить")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"change-block-title change-block-title--new-feedback"},[t("div",{staticClass:"new-feedback__visual"}),t("div",{staticClass:"new-feedback__desc"},[t("div",{staticClass:"new-feedback__author"},[this._v("Имя Фамилия")]),t("div",{staticClass:"new-feedback__author-position"},[this._v("Программист")])])])}],!1,null,null,null);n.options.__file="src/admin/pages/feedback.vue";t.default=n.exports},72:function(e,t,a){"use strict";var i=a(73),s=a.n(i),o=localStorage.getItem("token");s.a.defaults.baseURL="https://webdev-api.loftschool.com",s.a.defaults.headers.Authorization="Bearer ".concat(o),s.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;return e.response&&401===e.response.status?s.a.post("/refreshToken").then((function(e){var a=e.data.token;return localStorage.setItem("token",a),s.a.defaults.headers.Authorization="Bearer ".concat(a),t.headers.Authorization="Bearer ".concat(a),s()(t)})):Promise.reject(e)})),t.a=s.a},75:function(e,t,a){}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{103:function(t,e,a){"use strict";var i=a(74);a.n(i).a},108:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"feedback"},[a("div",{staticClass:"change-block-title"},[t._v("Добавить отзыв ")]),a("form",{staticClass:"feedback__field",on:{submit:function(e){return e.preventDefault(),t.submitFormFeedback(e)}}},[a("div",{staticClass:"feedback__visual"},[a("div",{staticClass:"feedback__avatar"},[t.filePreview?a("img",{attrs:{src:t.filePreview}}):t._e(),a("input",{ref:"fileUpload",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.handleFile}}),a("div",{staticClass:"feedback__avatar-icon"},[a("svg-icon",{attrs:{className:"admin__icon",iconName:"user"}})],1)]),a("button",{staticClass:"add-avatar",attrs:{type:"button"},on:{click:function(e){return t.$refs.fileUpload.click()}}},[t._v("Добавить фото")])]),a("div",{staticClass:"feedback__desc"},[a("div",{staticClass:"feedback__forms"},[a("div",{staticClass:"feedback__desc-row"},[a("div",{staticClass:"feedback__desc-item"},[a("label",{staticClass:"input__subtext",attrs:{for:"feedback-name-id"}},[t._v("Имя автора"),t.isError?a("span",{staticClass:"error"},[t._v(t._s(this.validation.firstError("formFeedback.author")))]):t._e()]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formFeedback.author,expression:"formFeedback.author"}],staticClass:"input__form",attrs:{id:"feedback-name-id",type:"text",name:"author-name"},domProps:{value:t.formFeedback.author},on:{input:function(e){e.target.composing||t.$set(t.formFeedback,"author",e.target.value)}}})]),a("div",{staticClass:"feedback__desc-item"},[a("label",{staticClass:"input__subtext",attrs:{for:"feedback-position-id"}},[t._v("Титул автора"),t.isError?a("span",{staticClass:"error"},[t._v(t._s(this.validation.firstError("formFeedback.position")))]):t._e()]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formFeedback.position,expression:"formFeedback.position"}],staticClass:"input__form",attrs:{id:"feedback-position-id",type:"text",name:"author-position"},domProps:{value:t.formFeedback.position},on:{input:function(e){e.target.composing||t.$set(t.formFeedback,"position",e.target.value)}}})])]),a("div",{staticClass:"feedback__desc-item feedback__desc-item--textarea"},[a("label",{staticClass:"input__subtext",attrs:{for:"feedback-textarea-id"}},[t._v("Отзыв"),t.isError?a("span",{staticClass:"error"},[t._v(t._s(this.validation.firstError("formFeedback.description")))]):t._e()]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formFeedback.description,expression:"formFeedback.description"}],staticClass:"input__textarea feedback-textarea",attrs:{id:"textarea-feedback-id",name:"feedback-textarea"},domProps:{value:t.formFeedback.description},on:{input:function(e){e.target.composing||t.$set(t.formFeedback,"description",e.target.value)}}})]),t._m(0)])])])]),a("div",{staticClass:"new-feedback"},[a("button",{staticClass:"load-big"},[a("div",{staticClass:"load-big__icon-box"},[a("svg-icon",{attrs:{className:"load__icon",iconName:"remove"}})],1),a("div",{staticClass:"load__text"},[t._v("Добавить работу")])]),a("div",{staticClass:"change-block change-block--feedback"},[t._m(1),a("div",{staticClass:"new-feedback-text"},[t._v("Данный план является примерным ориентиром. Вы всегда можете работать в удобном для себя темпе. Оптимальное время, которое мы рекомендуем выделять на обучение: 32-34 часа в неделю.")]),a("div",{staticClass:"fix-del__buttons fix-del__buttons--feedback"},[a("button",{staticClass:"fix-del__button fix-del__button--fix",attrs:{type:"button"}},[a("div",{staticClass:"fix-del__button-text"},[t._v("Править")]),a("div",{staticClass:"fix-del__icon fix-del__icon--fix"},[a("svg-icon",{attrs:{className:"admin__icon",iconName:"pencil"}})],1)]),a("button",{staticClass:"fix-del__button fix-del__button--delete",attrs:{type:"button"}},[a("div",{staticClass:"fix-del__button-text"},[t._v("Удалить")]),a("div",{staticClass:"fix-del__icon fix-del__icon--delete"},[a("svg-icon",{attrs:{className:"admin__icon",iconName:"remove"}})],1)])])])])])};i._withStripped=!0;a(15);var s=a(72),o=a.n(s);o.a.defaults.baseURL="https://webdev-api.loftschool.com/",o.a.defaults.headers.Authorization="Bearer ".concat("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjE4MiwiaXNzIjoiaHR0cDovL3dlYmRldi1hcGkubG9mdHNjaG9vbC5jb20vbG9naW4iLCJpYXQiOjE1NzIzMzkxNjYsImV4cCI6MTU3MjM1NzE2NiwibmJmIjoxNTcyMzM5MTY2LCJqdGkiOiJETWtFSGdoTHJRckhOSFN5In0.hO1JaKOowpplLaqgB1V8WJE7I2d2yFTG1qo_ywWFLUg");var r={data:function(){return{formFeedback:{photo:"",author:"",position:"",description:""},isError:!1,filePreview:""}},components:{svgIcon:function(){return Promise.resolve().then(a.bind(null,15))}},methods:{handleFile:function(t){var e=this,a=this.fileFromForm(t);this.formFeedback.photo=a,this.renderFile(a).then((function(t){e.filePreview=t}))},fileFromForm:function(t){var e=t.target.files||t.dataTransfer.files;if(!e.length)throw new Error("Нет файла");return e[0]},renderFile:function(t){var e=new FileReader;return new Promise((function(a,i){try{e.readAsDataURL(t),e.onloadend=function(){a(e.result)}}catch(t){throw new Error("Ошибка при чтении файла")}}))},submitFormFeedback:function(){var t=this;o.a.post("/reviews",{photo:this.formFeedback.photo,author:this.formFeedback.author,occ:this.formFeedback.position,text:this.formFeedback.description}).then((function(t){console.log(t.data)})).catch((function(t){console.log(t.response.data)})),this.$validate().then((function(e){e?console.log("Send form here",e):(console.log("Validation error",e),t.isError=!0)}))}},validators:{"formFeedback.photo":function(t){return Validator.value(t).required("Имя Фамилия")},"formFeedback.author":function(t){return Validator.value(t).required("Имя Фамилия")},"formFeedback.position":function(t){return Validator.value(t).required("Введите должность")},"formFeedback.description":function(t){return Validator.value(t).required("Заполните отзыв")}}},n=(a(103),a(3)),c=Object(n.a)(r,i,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"block__buttons"},[e("button",{staticClass:"cancel",attrs:{type:"button"}},[this._v("Отмена")]),e("button",{staticClass:"load"},[this._v("Загрузить")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"change-block-title change-block-title--new-feedback"},[e("div",{staticClass:"new-feedback__visual"}),e("div",{staticClass:"new-feedback__desc"},[e("div",{staticClass:"new-feedback__author"},[this._v("Имя Фамилия")]),e("div",{staticClass:"new-feedback__author-position"},[this._v("Программист")])])])}],!1,null,null,null);c.options.__file="src/admin/pages/feedback.vue";e.default=c.exports},74:function(t,e,a){}}]);